{
    "uuid": "67869033-b762-563a-a454-1153926560a2",
    "title": "NACL: A General and Effective KV Cache Eviction Framework for LLM at Inference Time",
    "conference_full": "Annual Meeting of the Association for Computational Linguistics",
    "conference": "ACL",
    "year": 2024,
    "volume": "Proceedings of the 62nd Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)",
    "bibtex": "@inproceedings{chen-etal-2024-nacl,\n    title = \"{NACL}: A General and Effective {KV} Cache Eviction Framework for {LLM} at Inference Time\",\n    author = \"Chen, Yilong  and\n      Wang, Guoxia  and\n      Shang, Junyuan  and\n      Cui, Shiyao  and\n      Zhang, Zhenyu  and\n      Liu, Tingwen  and\n      Wang, Shuohuan  and\n      Sun, Yu  and\n      Yu, Dianhai  and\n      Wu, Hua\",\n    editor = \"Ku, Lun-Wei  and\n      Martins, Andre  and\n      Srikumar, Vivek\",\n    booktitle = \"Proceedings of the 62nd Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)\",\n    month = aug,\n    year = \"2024\",\n    address = \"Bangkok, Thailand\",\n    publisher = \"Association for Computational Linguistics\",\n    url = \"https://aclanthology.org/2024.acl-long.428\",\n    doi = \"10.18653/v1/2024.acl-long.428\",\n    pages = \"7913--7926\",\n    abstract = \"Large Language Models (LLMs) have ignited an innovative surge of AI applications, marking a new era of exciting possibilities equipped with extended context windows. However, hosting these models is cost-prohibitive mainly due to the extensive memory consumption of KV Cache involving long-context modeling. Despite several works proposing to evict unnecessary tokens from the KV Cache, most of them rely on the biased local statistics of accumulated attention scores and report performance using unconvincing metric like perplexity on inadequate short-text evaluation. In this paper, we propose NACL, a general framework for long-context KV cache eviction that achieves more optimal and efficient eviction in a single operation during the encoding phase. Due to NACL{'}s efficiency, we combine more accurate attention score statistics in Proxy-Tokens Eviction with the diversified random eviction strategy of Random Eviction, aiming to alleviate the issue of attention bias and enhance the robustness in maintaining pivotal tokens for long-context modeling tasks. Notably, our method significantly improves the performance on short- and long-text tasks by 80{\\%} and 76{\\%} respectively, reducing KV Cache by up to $5\\times$ with over 95{\\%} performance maintenance. Code available at https://github.com/PaddlePaddle/Research/tree/master/NLP/ACL2024-NACL.\",\n}\n",
    "authors": [
        "Yilong Chen",
        "Guoxia Wang",
        "Junyuan Shang",
        "Shiyao Cui",
        "Zhenyu Zhang",
        "Tingwen Liu",
        "Shuohuan Wang",
        "Yu Sun",
        "Dianhai Yu",
        "Hua Wu"
    ],
    "pdf_url": "https://aclanthology.org/2024.acl-long.428.pdf",
    "pdf_path": "data/dataset/airqa/papers/acl2024/67869033-b762-563a-a454-1153926560a2.pdf",
    "abstract": "Large Language Models (LLMs) have ignited an innovative surge of AI applications, marking a new era of exciting possibilities equipped with extended context windows. However, hosting these models is cost-prohibitive mainly due to the extensive memory consumption of KV Cache involving long-context modeling. Despite several works proposing to evict unnecessary tokens from the KV Cache, most of them rely on the biased local statistics of accumulated attention scores and report performance using unconvincing metric like perplexity on inadequate short-text evaluation. In this paper, we propose NACL, a general framework for long-context KV cache eviction that achieves more optimal and efficient eviction in a single operation during the encoding phase. Due to NACL’s efficiency, we combine more accurate attention score statistics in Proxy-Tokens Eviction with the diversified random eviction strategy of Random Eviction, aiming to alleviate the issue of attention bias and enhance the robustness in maintaining pivotal tokens for long-context modeling tasks. Notably, our method significantly improves the performance on short- and long-text tasks by 80% and 76% respectively, reducing KV Cache by up to 5× with over 95% performance maintenance. Code available at https://github.com/PaddlePaddle/Research/tree/master/NLP/ACL2024-NACL.",
    "num_pages": 14
}